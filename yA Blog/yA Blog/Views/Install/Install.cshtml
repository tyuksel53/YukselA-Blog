
@{
    ViewBag.Title = "VeriTabani";
    Layout = "~/Views/Shared/_Layout_Install.cshtml";
}

<div class="container" style="margin-top:50px">
    <div class="row">
        <div class="offset-2 col-md-8 offset-2">
            <div class="progress">
                <div class="progress-bar" role="progressbar" style="width:5%" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <h4 style="margin-top:15px">Lütfen Veri Tabanı Bilgilerinizi Giriniz:</h4>

            <div style="display:none" class="alert alert-warning" id="loading" role="alert">
                <strong>Yükleniyor</strong>
            </div>
            @{
                <div class="form-group">
                    <label class="mr-sm-2" for="inlineFormCustomSelect">Veritabanı </label>
                    <select class="custom-select mb-2 mr-sm-2 mb-sm-0" id="Veritabani_type">
                        <option selected>Seçiniz</option>
                        <option value="1">MSSQL Veritabanı</option>
                        <option value="2">MySQL Veritabanı</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="veritabani_adresi" class="text-primary">Server Adresi:</label>
                    <input class="form-control" id="veritabani_adresi" placeholder="Veritabanı server adresi">
                </div>

                <div class="form-group">
                    <label for="veritabani_port" class="text-primary">Veritabanı Port Numarası:</label>
                    <input class="form-control" id="veritabani_port" placeholder="Bağlanmak istediğiniz veritabanı port numarasını girin" />
                </div>

                <div class="form-group">
                    <label for="veritabanı_adi" class="text-primary">Veritabanı Adı:</label>
                    <input class="form-control" id="veritabani_adi" placeholder="Bağlanmak istediğiniz veritabanı adını girin" />
                </div>

                <div class="form-group">
                    <label for="veritabani_kullaniciAdi" class="text-primary">Veritabanı Kullanıcı Adını Girin:</label>
                    <input class="form-control" id="veritabani_kullaniciAdi" placeholder="Veritabanı kullanıcı adınızı girin" />
                </div>

                <div class="form-group">
                    <label for="veritabani_sifre" class="text-primary">Veritabanı Parolanızı Girin:</label>
                    <input type="password" class="form-control" id="veritabani_sifre" placeholder="Veritabanı parolanızı girin" />
                </div>

                <div class="form-group">
                    <input type="submit" id="test_connection" class="btn btn-primary"value="Text Connection" />
                </div>
            }
                <div class="form-group">
                    <nav aria-label="Page navigation example">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">Previous</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="#">Next</a>
                            </li>
                        </ul>
                    </nav>
                </div>
        </div>
    </div>
</div>

@section Scripts{
    
    <script>
        $("#test_connection").click(function () {

            var veriTabaniType = $("#Veritabani_type").val();
            var adres = $("#veritabani_adresi").val();
            var adi = $("#veritabani_adi").val();
            var kullanici = $("#veritabani_kullaniciAdi").val();
            var sifre = $("#veritabani_sifre").val();
            var port = $("#veritabani_port").val();
            $.ajax({
                method: "POST",
                url: "/Install/VeriTabanı_Control",
                data: {
                    veritabanıType: veriTabaniType, veritabani_adresi: adres,
                    veritabani_adi: adi, veritabani_kullaniciAdi: kullanici,
                    veritabani_sifre: sifre, veritabani_port:port
                },
                beforeSend: function () {
                    $("#loading").show(300);
                }
            }).done(function (response) {
                console.log(response);
            }).always(function () {
                $("#loading").hide(300);
            });
        });

    </script>
        
    
}

